<script src="node_modules/js-yaml/dist/js-yaml.min.js"></script>
<script src="node_modules/js-yaml/dist/esprima.js"></script>
<script src="js/jquery-1.11.2.min.js"></script>



<h1 id="userEmail">Placeholder</h1>

Hello World

<table>
</table>

<script type="text/javascript">


xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","hierarchy.yaml",false);
xmlhttp.send();

console.log(xmlhttp.responseText)

var doc = jsyaml.load(xmlhttp.responseText);
console.log(doc)

$(document).ready(function () {
    var json = doc
    var tr;
    var hierarchy = json[1]['Topic Hierarchy']

    var basic_width = 450

    var topicsForChildren = function(object, tr, width, allRows){
        //tr = $('<tr/>');
        console.log(object)
        if (typeof object === 'string') {
            tr.append("<td width='"+ width + "px'>" + object + "</td>");
            return;
        }
        moreChildren = []
        for(var k in object){
            console.log('in loop')
            tr.append("<td width='"+ width + "px'>" + k + "</td>");
            tr2 = $('<tr/>');
            for (var i=0; i<object[k].length; i++){
                console.log('in inner loop')
                topicsForChildren(object[k][i], tr2, Math.floor(width/object[k].length), allRows)
            }
            console.log(allRows)
            allRows.push(tr2);
        }
        console.log(allRows)
        allRows.push(tr);
    }
    var rows = []
    tr = $('<tr/>');
    for(var i=0; i<hierarchy.length; i++){
        topicsForChildren(hierarchy[i], tr, Math.floor(basic_width / hierarchy.length), rows)
    }

    for (var i=0; i<rows.length; i++){
        $('table').append(rows[i]);
    }

});

document.getElementById("userEmail").innerHTML = doc.greeting;

</script>
